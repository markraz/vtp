<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>DLG.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.9.1 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>DLG.h</h1><div class="fragment"><pre>00001 <font class="comment">//</font>
00002 <font class="comment">// Classes/structures to represent the data in a DLG file</font>
00003 <font class="comment">//</font>
00004 <font class="comment">// Copyright (c) 2001 Virtual Terrain Project</font>
00005 <font class="comment">// Free for all uses, see license.txt for details.</font>
00006 <font class="comment">//</font>
00007 
00008 <font class="preprocessor">#ifndef VTDATA_DLGH</font>
00009 <font class="preprocessor"></font><font class="preprocessor">#define VTDATA_DLGH</font>
00010 <font class="preprocessor"></font>
00011 <font class="preprocessor">#include &lt;stdio.h&gt;</font>
00012 <font class="preprocessor">#include "MathTypes.h"</font>
00013 <font class="preprocessor">#include "Projections.h"</font>
00014 
00015 <font class="preprocessor">#define DLG_ERR_FILE    1</font>
00016 <font class="preprocessor"></font><font class="preprocessor">#define DLG_ERR_READ    2</font>
00017 <font class="preprocessor"></font><font class="preprocessor">#define DLG_ERR_HEADER  3</font>
00018 <font class="preprocessor"></font><font class="preprocessor">#define DLG_ERR_NODE    4</font>
00019 <font class="preprocessor"></font><font class="preprocessor">#define DLG_ERR_AREA    5</font>
00020 <font class="preprocessor"></font><font class="preprocessor">#define DLG_ERR_LINE    6</font>
00021 <font class="preprocessor"></font>
00022 <font class="keyword">enum</font> DLGType
00023 {
00024     DLG_HYPSO,
00025     DLG_HYDRO,
00026     DLG_VEG,
00027     DLG_NONVEG,
00028     DLG_BOUNDARIES,
00029     DLG_MARKERS,
00030     DLG_ROAD,
00031     DLG_RAIL,
00032     DLG_MTF,
00033     DLG_UNKNOWN
00034 };
00035 
00036 <font class="keyword">typedef</font> <font class="keyword">struct </font>DLGAttribute
00037 {
00038     <font class="keywordtype">int</font> m_iMajorAttr, m_iMinorAttr;
00039 } DLGAttribute;
00040 <font class="comment">//};</font>
00041 
00042 <font class="keyword">class </font>DLGNode
00043 {
00044 <font class="keyword">public</font>:
00045     DPoint2 m_p;
00046     <font class="keywordtype">int</font> m_iAttribs;
00047 };
00048 
00049 <font class="keyword">class </font>DLGArea
00050 {
00051 <font class="keyword">public</font>:
00052     DPoint2 m_p;
00053     <font class="keywordtype">int</font> m_iAttribs;
00054 };
00055 
00056 <font class="keyword">class </font>DLGLine
00057 {
00058 <font class="keyword">public</font>:
00059     <font class="keywordtype">int</font> HighwayNumber();
00060 
00061     <font class="keywordtype">int</font> m_iNode1, m_iNode2;
00062     <font class="keywordtype">int</font> m_iLeftArea, m_iRightArea;
00063     <font class="keywordtype">int</font> m_iCoords;
00064     <font class="keywordtype">int</font> m_iAttribs;
00065     DLGAttribute *m_attr;
00066     DPoint2 *m_p;
00067 };
00068 
00069 <font class="keyword">class </font>vtDLGFile
00070 {
00071 <font class="keyword">public</font>:
00072     vtDLGFile();    <font class="comment">// constructor</font>
00073     ~vtDLGFile();   <font class="comment">// destructor</font>
00074 
00075     <font class="comment">// Reads a file.  Pass it the name of a DLG-O (.opt) file.  Returns</font>
00076     <font class="comment">// true if successful.</font>
00077     <font class="keywordtype">bool</font> Read(<font class="keyword">const</font> <font class="keywordtype">char</font> *fname, <font class="keywordtype">void</font> progress_callback(<font class="keywordtype">int</font>) = NULL);
00078 
00079     <font class="comment">// read a single record from the file</font>
00080     <font class="keywordtype">bool</font> GetRecord(<font class="keywordtype">char</font> *buf);
00081 
00082     <font class="comment">// after loading, guess file type from the element attributes</font>
00083     DLGType GuessFileType();
00084 
00085     <font class="comment">// if an error occured, return it as an English message</font>
00086     <font class="keyword">const</font> <font class="keywordtype">char</font> *GetErrorMessage();
00087 
00088     <font class="comment">//for m_fp</font>
00089     <font class="keywordtype">void</font> OpenFile();
00090     <font class="keywordtype">void</font> CloseFile();
00091 
00092     <font class="comment">// return error if it didn't load successfully</font>
00093     <font class="keywordtype">int</font> m_iError;
00094 
00095     <font class="keywordtype">char</font>    m_header[80];
00096     <font class="keywordtype">int</font>     m_iNodes;
00097     <font class="keywordtype">int</font>     m_iAreas;
00098     <font class="keywordtype">int</font>     m_iLines;
00099     <font class="keywordtype">bool</font>    m_bLFdelimited;
00100 
00101     <font class="comment">// used while reading</font>
00102     <font class="keyword">const</font> <font class="keywordtype">char</font>* m_fname;
00103 
00104     <font class="comment">// quad corners (in the ground planimetric coordinate system)</font>
00105     DPoint2 m_SW_utm, m_NW_utm, m_NE_utm, m_SE_utm;
00106     DPoint2 m_SW_lat, m_NW_lat, m_NE_lat, m_SE_lat;
00107 
00108     DLGNode *m_nodes;
00109     DLGArea *m_areas;
00110     DLGLine *m_lines;
00111 
00112     <a class="code" href="classvtProjection.html">vtProjection</a> &amp;GetProjection()<font class="keyword"> </font>{ <font class="keywordflow">return</font> m_proj; }
00113 
00114 <font class="keyword">protected</font>:
00115     FILE *m_fp;
00116 
00117     <a class="code" href="classvtProjection.html">vtProjection</a>    m_proj;
00118 };
00119 
00120 <font class="comment">// helper</font>
00121 <font class="keywordtype">bool</font> ConvertDLG_from_LFDelim(<font class="keyword">const</font> <font class="keywordtype">char</font> *fname_from, <font class="keyword">const</font> <font class="keywordtype">char</font> *fname_to);
00122 
00123 <font class="preprocessor">#endif</font>
</font></pre></div><hr><address><small>Generated at Sun Oct 7 23:42:35 2001 for vtdata library by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.9.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
