<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>MathTypes.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.9.1 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>MathTypes.h</h1><div class="fragment"><pre>00001 <font class="comment">//</font>
00002 <font class="comment">// Basic data type definitions shared by all the VTP software.</font>
00003 <font class="comment">//</font>
00004 <font class="comment">// Copyright (c) 2001 Virtual Terrain Project</font>
00005 <font class="comment">// Free for all uses, see license.txt for details.</font>
00006 <font class="comment">//</font>
00007 
00101 <font class="preprocessor">#ifndef VTDATATYPESH</font>
00102 <font class="preprocessor"></font><font class="preprocessor">#define VTDATATYPESH</font>
00103 <font class="preprocessor"></font>
00104 <font class="preprocessor">#include &lt;math.h&gt;</font>
00105 <font class="preprocessor">#include "Array.h"</font>
00106 <font class="preprocessor">#include "Array.inl"</font>
00107 
00108 <font class="preprocessor">#ifndef PI</font>
00109 <font class="preprocessor"></font><font class="preprocessor">#define PI      3.141592653589793238</font>
00110 <font class="preprocessor"></font><font class="preprocessor">#endif</font>
00111 <font class="preprocessor"></font><font class="preprocessor">#ifndef PI2</font>
00112 <font class="preprocessor"></font><font class="preprocessor">#define PIf     3.141592653589793238f</font>
00113 <font class="preprocessor"></font><font class="preprocessor">#define PI2     6.283185307179586476</font>
00114 <font class="preprocessor"></font><font class="preprocessor">#define PI2f    6.283185307179586476f</font>
00115 <font class="preprocessor"></font><font class="preprocessor">#define PID2    1.570796326794896619</font>
00116 <font class="preprocessor"></font><font class="preprocessor">#define PID2f   1.570796326794896619f</font>
00117 <font class="preprocessor"></font><font class="preprocessor">#endif</font>
00118 <font class="preprocessor"></font>
00119 <font class="preprocessor">#ifndef NULL</font>
00120 <font class="preprocessor"></font><font class="preprocessor">#define NULL    0</font>
00121 <font class="preprocessor"></font><font class="preprocessor">#endif</font>
00122 <font class="preprocessor"></font>
00123 <font class="keyword">class </font>DPoint3;
00124 
00125 <font class="keyword">class </font>FPoint3 {
00126 <font class="keyword">public</font>:
00127     FPoint3()<font class="keyword"> </font>{ x = y = z = 0.0f; }
00128     FPoint3(<font class="keywordtype">float</font> fx, <font class="keywordtype">float</font> fy, <font class="keywordtype">float</font> fz)<font class="keyword"> </font>{ x=fx; y=fy; z=fz; }
00129 
00130     <font class="keywordtype">float</font> Length()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> sqrtf(x*x+y*y+z*z); }
00131     <font class="keywordtype">float</font> LengthSquared()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> x*x+y*y+z*z; }
00132     <font class="keywordtype">void</font> Normalize()<font class="keyword"> </font>{ <font class="keywordtype">float</font> s = 1.0f/Length(); x*=s; y*=s; z*=s; }
00133     <font class="keywordtype">void</font> Set(<font class="keywordtype">float</font> fx, <font class="keywordtype">float</font> fy, <font class="keywordtype">float</font> fz)<font class="keyword"> </font>{ x=fx; y=fy; z=fz; }
00134     <font class="keywordtype">float</font> Dot(<font class="keyword">const</font> FPoint3 &amp;rhs)<font class="keyword"> const</font>
00135 <font class="keyword">    </font>{
00136         <font class="keywordflow">return</font> x*rhs.x+y*rhs.y+z*rhs.z;
00137     }
00138     <font class="keywordtype">float</font> Dot(<font class="keyword">const</font> <font class="keywordtype">float</font> *fp)<font class="keyword"> const</font>
00139 <font class="keyword">    </font>{
00140         <font class="keywordflow">return</font> x*fp[0]+y*fp[1]+z*fp[2];
00141     }
00142     FPoint3 Cross(<font class="keyword">const</font> FPoint3 &amp;v)<font class="keyword"></font>
00143 <font class="keyword">    </font>{
00144         <font class="keywordflow">return</font> FPoint3(y*v.z - z*v.y, z*v.x - x*v.z, x*v.y - y*v.x);
00145     }
00146 
00147     <font class="comment">// assignment</font>
00148     FPoint3 &amp;operator=(<font class="keyword">const</font> FPoint3 &amp;v)<font class="keyword"> </font>{ x = v.x; y = v.y; z = v.z; <font class="keywordflow">return</font> *<font class="keyword">this</font>; }
00149     FPoint3 &amp;operator=(<font class="keyword">const</font> DPoint3 &amp;v);
00150 
00151     <font class="comment">// operators</font>
00152     FPoint3 operator +(<font class="keyword">const</font> FPoint3 &amp;v)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> FPoint3(x+v.x, y+v.y, z+v.z); }
00153     FPoint3 operator -(<font class="keyword">const</font> FPoint3 &amp;v)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> FPoint3(x-v.x, y-v.y, z-v.z); }
00154     FPoint3 operator *(<font class="keywordtype">float</font> s)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> FPoint3(x*s, y*s, z*s); }
00155     FPoint3 operator /(<font class="keywordtype">float</font> s)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> FPoint3(x/s, y/s, z/s); }
00156     FPoint3 operator -()<font class="keyword"> </font>{ <font class="keywordflow">return</font> FPoint3(-x, -y, -z); }
00157     <font class="keywordtype">bool</font> operator==(<font class="keyword">const</font> FPoint3 &amp;v2)<font class="keyword"></font>
00158 <font class="keyword">    </font>{ <font class="keywordflow">return</font> (x == v2.x &amp;&amp; y == v2.y &amp;&amp; z == v2.z); }
00159     <font class="keywordtype">bool</font> operator!=(<font class="keyword">const</font> FPoint3 &amp;v2)<font class="keyword"></font>
00160 <font class="keyword">    </font>{ <font class="keywordflow">return</font> (x != v2.x || y != v2.y || z != v2.z); }
00161 
00162     <font class="keywordtype">void</font> operator +=(<font class="keyword">const</font> FPoint3 &amp;v)<font class="keyword"> </font>{ x+=v.x; y+=v.y; z+=v.z; }
00163     <font class="keywordtype">void</font> operator -=(<font class="keyword">const</font> FPoint3 &amp;v)<font class="keyword"> </font>{ x-=v.x; y-=v.y; z-=v.z; }
00164     <font class="keywordtype">void</font> operator *=(<font class="keywordtype">float</font> s)<font class="keyword"> </font>{ x*=s; y*=s; z*=s; }
00165     <font class="keywordtype">void</font> operator /=(<font class="keywordtype">float</font> s)<font class="keyword"> </font>{ x/=s; y/=s; z/=s; }
00166 
00167     <font class="keywordtype">float</font> x, y, z;
00168 };
00169 
00170 <font class="keyword">class </font>DPoint3 {
00171 <font class="keyword">public</font>:
00172     DPoint3()<font class="keyword"> </font>{ x = y = z = 0.0f; }
00173     DPoint3(<font class="keywordtype">double</font> fx, <font class="keywordtype">double</font> fy, <font class="keywordtype">double</font> fz)<font class="keyword"> </font>{ x=fx; y=fy; z=fz; }
00174 
00175     <font class="keywordtype">double</font> Length()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> sqrt(x*x+y*y+z*z); }
00176     <font class="keywordtype">void</font> Normalize()<font class="keyword"> </font>{ <font class="keywordtype">double</font> s = 1.0f/Length(); x*=s; y*=s; z*=s; }
00177     <font class="keywordtype">void</font> Set(<font class="keywordtype">double</font> fx, <font class="keywordtype">double</font> fy, <font class="keywordtype">double</font> fz)<font class="keyword"> </font>{ x=fx; y=fy; z=fz; }
00178     DPoint3 Cross(<font class="keyword">const</font> DPoint3 &amp;v)<font class="keyword"></font>
00179 <font class="keyword">    </font>{
00180         <font class="keywordflow">return</font> DPoint3(y*v.z - z*v.y, z*v.x - x*v.z, x*v.y - y*v.x);
00181     }
00182     <font class="comment">// assignment</font>
00183     DPoint3 &amp;operator=(<font class="keyword">const</font> DPoint3 &amp;v)<font class="keyword"> </font>{ x = v.x; y = v.y; z = v.z; <font class="keywordflow">return</font> *<font class="keyword">this</font>; }
00184     DPoint3 &amp;operator=(<font class="keyword">const</font> FPoint3 &amp;v);
00185 
00186     <font class="comment">// operators</font>
00187     DPoint3 operator +(<font class="keyword">const</font> DPoint3 &amp;v)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> DPoint3(x+v.x, y+v.y, z+v.z); }
00188     DPoint3 operator -(<font class="keyword">const</font> DPoint3 &amp;v)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> DPoint3(x-v.x, y-v.y, z-v.z); }
00189     DPoint3 operator *(<font class="keywordtype">double</font> s)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> DPoint3(x*s, y*s, z*s); }
00190     DPoint3 operator /(<font class="keywordtype">double</font> s)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> DPoint3(x/s, y/s, z/s); }
00191 
00192     <font class="comment">// dot product</font>
00193     <font class="keywordtype">double</font> operator *(<font class="keyword">const</font> DPoint3 &amp;v)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> x*v.x + y*v.y + z*v.z; }
00194 
00195     <font class="keywordtype">void</font> operator +=(<font class="keyword">const</font> DPoint3 &amp;v)<font class="keyword"> </font>{ x+=v.x; y+=v.y; z+=v.z; }
00196     <font class="keywordtype">void</font> operator -=(<font class="keyword">const</font> DPoint3 &amp;v)<font class="keyword"> </font>{ x-=v.x; y-=v.y; z-=v.z; }
00197     <font class="keywordtype">void</font> operator *=(<font class="keywordtype">double</font> s)<font class="keyword"> </font>{ x*=s; y*=s; z*=s; }
00198     <font class="keywordtype">void</font> operator /=(<font class="keywordtype">double</font> s)<font class="keyword"> </font>{ x/=s; y/=s; z/=s; }
00199 
00200     <font class="keywordtype">double</font> x, y, z;
00201 };
00202 
00203 <font class="comment">// Conversion</font>
00204 <font class="keyword">inline</font> FPoint3 &amp;FPoint3::operator=(<font class="keyword">const</font> DPoint3 &amp;v)<font class="keyword"> </font>{ x = (<font class="keywordtype">float</font>) v.x; y = (<font class="keywordtype">float</font>) v.y; z = (<font class="keywordtype">float</font>) v.z; <font class="keywordflow">return</font> *<font class="keyword">this</font>; }
00205 <font class="keyword">inline</font> DPoint3 &amp;DPoint3::operator=(<font class="keyword">const</font> FPoint3 &amp;v)<font class="keyword"> </font>{ x = v.x; y = v.y; z = v.z; <font class="keywordflow">return</font> *<font class="keyword">this</font>; }
00206 
00208 
00209 <font class="keyword">class </font>FPlane : <font class="keyword">public</font> FPoint3
00210 {
00211 <font class="keyword">public</font>:
00212     FPlane()<font class="keyword"> </font>{}
00213     FPlane(<font class="keywordtype">float</font> a, <font class="keywordtype">float</font> b, <font class="keywordtype">float</font> c, <font class="keywordtype">float</font> d)<font class="keyword"> </font>{ x = a; y = b; z = c; w = d; }
00214     <font class="keyword">const</font> FPlane &amp;operator=(<font class="keyword">const</font> FPlane &amp;rhs)<font class="keyword"></font>
00215 <font class="keyword">    </font>{
00216         x = rhs.x;
00217         y = rhs.y;
00218         z = rhs.z;
00219         w = rhs.w;
00220         <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00221     }
00222     <font class="keywordtype">void</font> Set(<font class="keyword">const</font> FPoint3&amp; p, <font class="keyword">const</font> FPoint3&amp; n)<font class="keyword"></font>
00223 <font class="keyword">    </font>{
00224         x = n.x;
00225         y = n.y;
00226         z = n.z;
00227         w = -n.Dot(p);
00228     }
00229     <font class="keywordtype">void</font> Set(<font class="keywordtype">float</font> a, <font class="keywordtype">float</font> b, <font class="keywordtype">float</font> c, <font class="keywordtype">float</font> d)<font class="keyword"> </font>{ x = a; y = b; z = c; w = d; }
00230     <font class="keywordtype">float</font> Distance(<font class="keyword">const</font> FPoint3 &amp;v)<font class="keyword"> const</font>
00231 <font class="keyword">    </font>{
00232         <font class="keywordflow">return</font> Dot(v) + w;
00233     }
00234 
00235     <font class="keywordtype">float</font> w;
00236 };
00237 
00239 
00240 <font class="keyword">class </font>FPoint2;
00241 <font class="keyword">class </font>DPoint2;
00242 
00243 <font class="keyword">class </font>FPoint2 {
00244 <font class="keyword">public</font>:
00245     FPoint2()<font class="keyword"> </font>{ x = y = 0.0f; }
00246     FPoint2(<font class="keywordtype">int</font> ix, <font class="keywordtype">int</font> iy)<font class="keyword"> </font>{ x=(<font class="keywordtype">float</font>)ix; y=(<font class="keywordtype">float</font>)iy; }
00247     FPoint2(<font class="keywordtype">float</font> fx, <font class="keywordtype">float</font> fy)<font class="keyword"> </font>{ x=fx; y=fy; }
00248     FPoint2(<font class="keywordtype">double</font> dx, <font class="keywordtype">double</font> dy)<font class="keyword"> </font>{ x=(<font class="keywordtype">float</font>)dx; y=(<font class="keywordtype">float</font>)dy; }
00249     FPoint2(<font class="keyword">const</font> DPoint2 &amp;d);
00250 
00251     <font class="keywordtype">float</font> Length()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> sqrtf(x*x+y*y); }
00252     <font class="keywordtype">void</font> Normalize()<font class="keyword"> </font>{ <font class="keywordtype">float</font> s = 1.0f/Length(); x*=s; y*=s; }
00253     <font class="keywordtype">void</font> Set(<font class="keywordtype">float</font> fx, <font class="keywordtype">float</font> fy)<font class="keyword"> </font>{ x=fx; y=fy; }
00254 
00255     <font class="comment">// assignment</font>
00256     FPoint2 &amp;operator=(<font class="keyword">const</font> FPoint2 &amp;v)<font class="keyword"> </font>{ x = v.x; y = v.y; <font class="keywordflow">return</font> *<font class="keyword">this</font>; }
00257     FPoint2 &amp;operator=(<font class="keyword">const</font> <font class="keyword">class</font> DPoint2 &amp;v);
00258 
00259     FPoint2 operator +(<font class="keyword">const</font> FPoint2 &amp;v)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> FPoint2(x+v.x, y+v.y); }
00260     FPoint2 operator -(<font class="keyword">const</font> FPoint2 &amp;v)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> FPoint2(x-v.x, y-v.y); }
00261     FPoint2 operator *(<font class="keywordtype">float</font> s)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> FPoint2(x*s, y*s); }
00262 
00263     <font class="keywordtype">void</font> operator +=(<font class="keyword">const</font> FPoint2 &amp;v)<font class="keyword"> </font>{ x+=v.x; y+=v.y; }
00264     <font class="keywordtype">void</font> operator -=(<font class="keyword">const</font> FPoint2 &amp;v)<font class="keyword"> </font>{ x-=v.x; y-=v.y; }
00265     <font class="keywordtype">void</font> operator *=(<font class="keywordtype">float</font> s)<font class="keyword"> </font>{ x*=s; y*=s; }
00266 
00267     <font class="keywordtype">bool</font> operator==(<font class="keyword">const</font> FPoint2 &amp;v)<font class="keyword"> </font>{ <font class="keywordflow">return</font> (x == v.x &amp;&amp; y == v.y); }
00268     <font class="keywordtype">bool</font> operator!=(<font class="keyword">const</font> FPoint2 &amp;v)<font class="keyword"> </font>{ <font class="keywordflow">return</font> (x != v.x || y != v.y); }
00269 
00270     <font class="keywordtype">float</font> x, y;
00271 };
00272 
00273 <font class="keyword">class </font>DPoint2 {
00274 <font class="keyword">public</font>:
00275     DPoint2()<font class="keyword"> </font>{ x = y = 0.0f; }
00276     DPoint2(<font class="keywordtype">int</font> ix, <font class="keywordtype">int</font> iy)<font class="keyword"> </font>{ x=(<font class="keywordtype">double</font>)ix; y=(<font class="keywordtype">double</font>)iy; }
00277     DPoint2(<font class="keywordtype">float</font> fx, <font class="keywordtype">float</font> fy)<font class="keyword"> </font>{ x=fx; y=fy; }
00278     DPoint2(<font class="keywordtype">double</font> fx, <font class="keywordtype">double</font> fy)<font class="keyword"> </font>{ x=fx; y=fy; }
00279     DPoint2(<font class="keyword">const</font> FPoint2 &amp;f);
00280 
00281     <font class="keywordtype">double</font> Length()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> sqrt(x*x+y*y); }
00282     <font class="keywordtype">void</font> Normalize()<font class="keyword"> </font>{ <font class="keywordtype">double</font> s = 1.0/Length(); x*=s; y*=s; }
00283     <font class="keywordtype">void</font> Set(<font class="keywordtype">double</font> fx, <font class="keywordtype">double</font> fy)<font class="keyword"> </font>{ x=fx; y=fy; }
00284     <font class="keywordtype">void</font> Rotate(<font class="keywordtype">double</font> radians)<font class="keyword"></font>
00285 <font class="keyword">    </font>{
00286         <font class="keywordtype">double</font> tempx = x;
00287         x = x * cos(radians) - y * sin(radians);
00288         y = tempx * sin(radians) + y * cos(radians);
00289     }
00290 
00291     <font class="comment">// assignment</font>
00292     DPoint2 &amp;operator=(<font class="keyword">const</font> DPoint2 &amp;v)<font class="keyword"> </font>{ x = v.x; y = v.y; <font class="keywordflow">return</font> *<font class="keyword">this</font>; }
00293     DPoint2 &amp;operator=(<font class="keyword">const</font> <font class="keyword">class</font> FPoint2 &amp;v);
00294 
00295     DPoint2 operator +(<font class="keyword">const</font> DPoint2 &amp;v)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> DPoint2(x+v.x, y+v.y); }
00296     DPoint2 operator -(<font class="keyword">const</font> DPoint2 &amp;v)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> DPoint2(x-v.x, y-v.y); }
00297     DPoint2 operator *(<font class="keywordtype">double</font> s)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> DPoint2(x*s, y*s); }
00298     DPoint2 operator /(<font class="keywordtype">double</font> s)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> DPoint2(x/s, y/s); }
00299 
00300     <font class="keywordtype">void</font> operator +=(<font class="keyword">const</font> DPoint2 &amp;v)<font class="keyword"> </font>{ x+=v.x; y+=v.y; }
00301     <font class="keywordtype">void</font> operator -=(<font class="keyword">const</font> DPoint2 &amp;v)<font class="keyword"> </font>{ x-=v.x; y-=v.y; }
00302     <font class="keywordtype">void</font> operator *=(<font class="keywordtype">double</font> s)<font class="keyword"> </font>{ x*=s; y*=s; }
00303     <font class="keywordtype">void</font> operator /=(<font class="keywordtype">double</font> s)<font class="keyword"> </font>{ x/=s; y/=s; }
00304 
00305     <font class="keywordtype">bool</font> operator==(<font class="keyword">const</font> DPoint2 &amp;v)<font class="keyword"> </font>{ <font class="keywordflow">return</font> (x == v.x &amp;&amp; y == v.y); }
00306 
00307     <font class="keywordtype">double</font> x, y;
00308 };
00309 
00310 
00311 <font class="comment">// copy constructors FPoint2 &lt;&gt; DPoint2</font>
00312 <font class="keyword">inline</font> FPoint2::FPoint2(<font class="keyword">const</font> DPoint2 &amp;d)<font class="keyword"> </font>{ x=(<font class="keywordtype">float</font>)d.x; y=(<font class="keywordtype">float</font>)d.y; }
00313 <font class="keyword">inline</font> DPoint2::DPoint2(<font class="keyword">const</font> FPoint2 &amp;f)<font class="keyword"> </font>{ x=f.x; y=f.y; }
00314 
00315 
00316 <font class="keyword">class </font>IPoint2 {
00317 <font class="keyword">public</font>:
00318     IPoint2()<font class="keyword"> </font>{}
00319     IPoint2(<font class="keywordtype">int</font> ix, <font class="keywordtype">int</font> iy)<font class="keyword"> </font>{ x=ix; y=iy; }
00320 
00321     <font class="keywordtype">float</font> Length()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> sqrtf((<font class="keywordtype">float</font>)x*x + (<font class="keywordtype">float</font>)y*y); }
00322     <font class="keywordtype">void</font> Set(<font class="keywordtype">int</font> ix, <font class="keywordtype">int</font> iy)<font class="keyword"> </font>{ x=ix; y=iy; }
00323     IPoint2 &amp;operator=(<font class="keyword">const</font> IPoint2 &amp;v)<font class="keyword"> </font>{ x = v.x; y = v.y; <font class="keywordflow">return</font> *<font class="keyword">this</font>; }
00324 
00325     IPoint2 operator +(<font class="keyword">const</font> IPoint2 &amp;v)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> IPoint2(x+v.x, y+v.y); }
00326     IPoint2 operator -(<font class="keyword">const</font> IPoint2 &amp;v)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> IPoint2(x-v.x, y-v.y); }
00327     IPoint2 operator *(<font class="keywordtype">int</font> s)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> IPoint2(x*s, y*s); }
00328     IPoint2 operator *(<font class="keywordtype">float</font> f)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> IPoint2((<font class="keywordtype">int</font>)(x*f), (<font class="keywordtype">int</font>)(y*f)); }
00329 
00330     <font class="keywordtype">void</font> operator +=(<font class="keyword">const</font> IPoint2 &amp;v)<font class="keyword"> </font>{ x+=v.x; y+=v.y; }
00331     <font class="keywordtype">void</font> operator -=(<font class="keyword">const</font> IPoint2 &amp;v)<font class="keyword"> </font>{ x-=v.x; y-=v.y; }
00332     <font class="keywordtype">void</font> operator *=(<font class="keywordtype">int</font> s)<font class="keyword"> </font>{ x*=s; y*=s; }
00333     <font class="keywordtype">void</font> operator *=(<font class="keywordtype">float</font> f)<font class="keyword"> </font>{ x=(<font class="keywordtype">int</font>)(x*f); y=(<font class="keywordtype">int</font>)(y*f); }
00334 
00335     <font class="keywordtype">int</font> x, y;
00336 };
00337 
00338 <font class="keyword">inline</font> FPoint2 &amp;FPoint2::operator=(<font class="keyword">const</font> <font class="keyword">class</font> DPoint2 &amp;v)<font class="keyword"></font>
00339 <font class="keyword"></font>{
00340     x = (<font class="keywordtype">float</font>) v.x;
00341     y = (<font class="keywordtype">float</font>) v.y;
00342     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00343 }
00344 
00345 <font class="keyword">inline</font> DPoint2 &amp;DPoint2::operator=(<font class="keyword">const</font> <font class="keyword">class</font> FPoint2 &amp;v)<font class="keyword"></font>
00346 <font class="keyword"></font>{
00347     x = v.x;
00348     y = v.y;
00349     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00350 }
00351 
00352 <font class="comment">//</font>
00353 <font class="comment">// a series of points, which can represent either a series of line</font>
00354 <font class="comment">//  segments or a closed polygon</font>
00355 <font class="comment">//</font>
00356 <font class="keyword">class </font>DLine2 : <font class="keyword">public</font> Array&lt;DPoint2&gt;
00357 {
00358 <font class="keyword">public</font>:
00359     DLine2()<font class="keyword"> </font>{}
00360     <font class="comment">// copy constructor</font>
00361     DLine2(DLine2 &amp;ref)<font class="keyword"> </font>{ *<font class="keyword">this</font> = ref; }
00362 
00363     <font class="comment">// assignment</font>
00364     DLine2 &amp;operator=(<font class="keyword">const</font> <font class="keyword">class</font> DLine2 &amp;v);
00365     DLine2 &amp;operator=(<font class="keyword">const</font> <font class="keyword">class</font> FLine2 &amp;v);
00366 
00367     <font class="keywordtype">void</font> RemovePoint(<font class="keywordtype">int</font> i);
00368     <font class="keywordtype">bool</font> ContainsPoint(<font class="keyword">const</font> DPoint2 &amp;p);
00369 };
00370 
00371 <font class="keyword">class </font>FLine2 : <font class="keyword">public</font> Array&lt;FPoint2&gt;
00372 {
00373 <font class="keyword">public</font>:
00374     FLine2()<font class="keyword"> </font>{}
00375     <font class="comment">// copy constructor</font>
00376     FLine2(FLine2 &amp;ref)<font class="keyword"> </font>{ *<font class="keyword">this</font> = ref; }
00377 
00378     <font class="comment">// assignment</font>
00379     FLine2 &amp;operator=(<font class="keyword">const</font> <font class="keyword">class</font> FLine2 &amp;v);
00380     FLine2 &amp;operator=(<font class="keyword">const</font> <font class="keyword">class</font> DLine2 &amp;v);
00381 };
00382 
00383 <font class="keyword">inline</font> DLine2 &amp;DLine2::operator=(<font class="keyword">const</font> <font class="keyword">class</font> DLine2 &amp;v)<font class="keyword"></font>
00384 <font class="keyword"></font>{
00385     <font class="keywordtype">int</font> size = v.GetSize();
00386     SetSize(size);
00387     <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i &lt; size; i++)
00388         SetAt(i, v.GetAt(i));
00389 
00390     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00391 }
00392 
00393 <font class="keyword">inline</font> DLine2 &amp;DLine2::operator=(<font class="keyword">const</font> <font class="keyword">class</font> FLine2 &amp;v)<font class="keyword"></font>
00394 <font class="keyword"></font>{
00395     <font class="keywordtype">int</font> size = v.GetSize();
00396     SetSize(size);
00397 
00398     FPoint2 p1;
00399     DPoint2 p2;
00400     <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i &lt; size; i++)
00401     {
00402         p1 = v.GetAt(i);
00403         p2 = p1;
00404         SetAt(i, p2);
00405     }
00406     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00407 }
00408 
00409 <font class="keyword">inline</font> FLine2 &amp;FLine2::operator=(<font class="keyword">const</font> <font class="keyword">class</font> FLine2 &amp;v)<font class="keyword"></font>
00410 <font class="keyword"></font>{
00411     <font class="keywordtype">int</font> size = v.GetSize();
00412     SetSize(size);
00413     <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i &lt; size; i++)
00414         SetAt(i, v.GetAt(i));
00415 
00416     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00417 }
00418 
00419 <font class="keyword">inline</font> FLine2 &amp;FLine2::operator=(<font class="keyword">const</font> <font class="keyword">class</font> DLine2 &amp;v)<font class="keyword"></font>
00420 <font class="keyword"></font>{
00421     <font class="keywordtype">int</font> size = v.GetSize();
00422     SetSize(size);
00423 
00424     DPoint2 p1;
00425     FPoint2 p2;
00426     <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i &lt; size; i++)
00427     {
00428         p1 = v.GetAt(i);
00429         p2 = p1;
00430         SetAt(i, p2);
00431     }
00432     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00433 }
00434 
00436 
00437 <font class="keyword">class </font>DLine3 : <font class="keyword">public</font> Array&lt;DPoint3&gt;
00438 {
00439 <font class="keyword">public</font>:
00440     DLine3()<font class="keyword"> </font>{}
00441     <font class="comment">// copy constructor</font>
00442     DLine3(DLine3 &amp;ref)<font class="keyword"> </font>{ *<font class="keyword">this</font> = ref; }
00443 
00444     <font class="comment">// assignment</font>
00445     DLine3 &amp;operator=(<font class="keyword">const</font> <font class="keyword">class</font> DLine3 &amp;v);
00446 <font class="comment">//  DLine3 &amp;operator=(const class FLine3 &amp;v);</font>
00447 
00448     <font class="keywordtype">void</font> RemovePoint(<font class="keywordtype">int</font> i);
00449 };
00450 
00451 <font class="keyword">class </font>FLine3 : <font class="keyword">public</font> Array&lt;FPoint3&gt;
00452 {
00453 <font class="keyword">public</font>:
00454     FLine3()<font class="keyword"> </font>{}
00455     <font class="comment">// copy constructor</font>
00456     FLine3(FLine3 &amp;ref)<font class="keyword"> </font>{ *<font class="keyword">this</font> = ref; }
00457 
00458     <font class="comment">// assignment</font>
00459     FLine3 &amp;operator=(<font class="keyword">const</font> <font class="keyword">class</font> FLine3 &amp;v);
00460 <font class="comment">//  FLine3 &amp;operator=(const class DLine3 &amp;v);</font>
00461 };
00462 
00463 <font class="keyword">inline</font> DLine3 &amp;DLine3::operator=(<font class="keyword">const</font> <font class="keyword">class</font> DLine3 &amp;v)<font class="keyword"></font>
00464 <font class="keyword"></font>{
00465     <font class="keywordtype">int</font> size = v.GetSize();
00466     SetSize(size);
00467     <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i &lt; size; i++)
00468         SetAt(i, v.GetAt(i));
00469 
00470     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00471 }
00472 
00473 <font class="keyword">inline</font> FLine3 &amp;FLine3::operator=(<font class="keyword">const</font> <font class="keyword">class</font> FLine3 &amp;v)<font class="keyword"></font>
00474 <font class="keyword"></font>{
00475     <font class="keywordtype">int</font> size = v.GetSize();
00476     SetSize(size);
00477     <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i &lt; size; i++)
00478         SetAt(i, v.GetAt(i));
00479 
00480     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00481 }
00482 
00484 
00485 <font class="keyword">class </font>FBox3
00486 {
00487 <font class="keyword">public</font>:
00488     FBox3()<font class="keyword"> </font>{}
00489     FBox3(FPoint3 &amp;min1, FPoint3 &amp;max1)<font class="keyword"> </font>{ min = min1; max = max1; }
00490 
00491     <font class="keywordtype">void</font> Set(<font class="keywordtype">float</font> x1, <font class="keywordtype">float</font> y1, <font class="keywordtype">float</font> z1, <font class="keywordtype">float</font> x2, <font class="keywordtype">float</font> y2, <font class="keywordtype">float</font> z2)<font class="keyword"></font>
00492 <font class="keyword">    </font>{
00493         min.Set(x1, y1, z1);
00494         max.Set(x2, y2, z2);
00495     }
00496     FPoint3 Center()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> ((min + max) * 0.5); }
00497 
00498     FPoint3 min, max;
00499 };
00500 
00502 
00503 <font class="keyword">class </font>FSphere
00504 {
00505 <font class="keyword">public</font>:
00506     FSphere()<font class="keyword"> </font>{}
00507     FSphere(<font class="keyword">const</font> FBox3 &amp;src)<font class="keyword"></font>
00508 <font class="keyword">    </font>{
00509         center = src.Center();
00510         radius = (center - src.min).Length();
00511     }
00512     FSphere(<font class="keyword">const</font> FPoint3&amp; p, <font class="keywordtype">float</font> fRadius)<font class="keyword"></font>
00513 <font class="keyword">    </font>{
00514         Set(p, fRadius);
00515     }
00516     <font class="keyword">const</font> FSphere &amp;operator=(<font class="keyword">const</font> FSphere &amp;rhs)<font class="keyword"></font>
00517 <font class="keyword">    </font>{
00518         center = rhs.center;
00519         radius = rhs.radius;
00520         <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00521     }
00522     <font class="keywordtype">void</font> Set(<font class="keyword">const</font> FPoint3&amp; p, <font class="keywordtype">float</font> fRadius)<font class="keyword"></font>
00523 <font class="keyword">    </font>{
00524         center = p;
00525         radius = fRadius;
00526     }
00527     <font class="keywordtype">void</font> Empty()<font class="keyword"> </font>{ center.Set(0,0,0); radius = 0; }
00528 
00529     FPoint3 center;
00530     <font class="keywordtype">float</font> radius;
00531 };
00532 
00534 
00535 <font class="comment">//</font>
00536 <font class="comment">// a collection of polygons</font>
00537 <font class="comment">//</font>
00538 <font class="keyword">class </font>DPolyArray2 : <font class="keyword">public</font> Array&lt;DLine2 *&gt;
00539 {
00540 <font class="keyword">public</font>:
00541     DPolyArray2()<font class="keyword"> </font>{ m_previous_poly = -1; }
00542 
00543     <font class="keywordtype">int</font> FindPoly(DPoint2 p);
00544 
00545     <font class="comment">// for speed, remember the polygon that we found last time</font>
00546     <font class="keywordtype">int</font> m_previous_poly;
00547 };
00548 
00549 
00550 <font class="comment">//</font>
00551 <font class="comment">// DRECT / FRECT</font>
00552 <font class="comment">//</font>
00553 <font class="comment">// These rectangle classes are meant to be used for geographical areas,</font>
00554 <font class="comment">// or texture coordinates, which assume that the vertical axis increases</font>
00555 <font class="comment">// upward, not like typical screen coordinates which increase downwards.</font>
00556 <font class="comment">//</font>
00557 <font class="keyword">class </font>DRECT
00558 {
00559 <font class="keyword">public</font>:
00560     DRECT()<font class="keyword"> </font>{ left = top = right = bottom = 0.0; }
00561     DRECT(<font class="keywordtype">double</font> l, <font class="keywordtype">double</font> t, <font class="keywordtype">double</font> r, <font class="keywordtype">double</font> b)<font class="keyword"> </font>{ left = l; top = t; right = r; bottom = b; }
00562 
00563     <font class="keywordtype">void</font> SetRect(<font class="keywordtype">double</font> l, <font class="keywordtype">double</font> t, <font class="keywordtype">double</font> r, <font class="keywordtype">double</font> b)<font class="keyword"> </font>{ left = l; top = t; right = r; bottom = b; }
00564     <font class="comment">// retrieves the width</font>
00565     <font class="keywordtype">double</font> Width()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> right - left; }
00566     <font class="comment">// returns the height</font>
00567     <font class="keywordtype">double</font> Height()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> top - bottom; };
00568     <font class="comment">// return true if null (all 0)</font>
00569     <font class="keywordtype">bool</font> IsNull()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> (left == 0.0 &amp;&amp; top == 0.0 &amp;&amp; right == 0.0 &amp;&amp; bottom == 0.0); }
00570     <font class="comment">// return true if empty</font>
00571     <font class="keywordtype">bool</font> IsEmpty()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> (left == right &amp;&amp; top == bottom); }
00572     <font class="keywordtype">void</font> Sort()<font class="keyword"></font>
00573 <font class="keyword">    </font>{
00574         <font class="keywordtype">double</font> tmp;
00575         <font class="keywordflow">if</font> (left &gt; right)
00576         {
00577             tmp = left;
00578             left = right;
00579             right = tmp;
00580         }
00581         <font class="keywordflow">if</font> (bottom &gt; top)
00582         {
00583             tmp = bottom;
00584             bottom = top;
00585             top = tmp;
00586         }
00587     }
00588     <font class="keywordtype">void</font> GetCenter(DPoint2 &amp;p)<font class="keyword"> const</font>
00589 <font class="keyword">    </font>{
00590         p.x = (left + right) / 2.0;
00591         p.y = (bottom + top) / 2.0;
00592     }
00593     <font class="keywordtype">bool</font> ContainsPoint(<font class="keyword">const</font> DPoint2 &amp;p)<font class="keyword"> const</font>
00594 <font class="keyword">    </font>{
00595         <font class="keywordflow">return</font> (p.x &gt; left &amp;&amp; p.x &lt; right &amp;&amp; p.y &gt; bottom &amp;&amp; p.y &lt; top);
00596     }
00597     <font class="keywordtype">void</font> GrowToContainPoint(<font class="keyword">const</font> DPoint2 &amp;p)<font class="keyword"></font>
00598 <font class="keyword">    </font>{
00599         <font class="keywordflow">if</font> (p.x &lt; left)     left = p.x;
00600         <font class="keywordflow">if</font> (p.x &gt; right)    right = p.x;
00601         <font class="keywordflow">if</font> (p.y &lt; bottom)   bottom = p.y;
00602         <font class="keywordflow">if</font> (p.y &gt; top)      top = p.y;
00603     }
00604     <font class="keywordtype">void</font> GrowToContainLine(<font class="keyword">const</font> DLine2 &amp;line)<font class="keyword"></font>
00605 <font class="keyword">    </font>{
00606         DPoint2 p;
00607         <font class="keywordtype">int</font> size = line.GetSize();
00608         <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i &lt; size; i++)
00609         {
00610             p = line.GetAt(i);
00611             <font class="keywordflow">if</font> (p.x &lt; left)     left = p.x;
00612             <font class="keywordflow">if</font> (p.x &gt; right)    right = p.x;
00613             <font class="keywordflow">if</font> (p.y &lt; bottom)   bottom = p.y;
00614             <font class="keywordflow">if</font> (p.y &gt; top)      top = p.y;
00615         }
00616     }
00617     <font class="comment">// expand geographical rectangle r1 to include rectangle r2</font>
00618     <font class="keywordtype">void</font> GrowToContainRect(<font class="keyword">const</font> DRECT &amp;r2)<font class="keyword"></font>
00619 <font class="keyword">    </font>{
00620         <font class="keywordflow">if</font> (r2.left &lt; left)     left = r2.left;
00621         <font class="keywordflow">if</font> (r2.right &gt; right)   right = r2.right;
00622         <font class="keywordflow">if</font> (r2.top &gt; top)       top = r2.top;
00623         <font class="keywordflow">if</font> (r2.bottom &lt; bottom) bottom = r2.bottom;
00624     }
00625     <font class="keywordtype">bool</font> operator==(<font class="keyword">const</font> DRECT &amp;v)<font class="keyword"></font>
00626 <font class="keyword">    </font>{
00627         <font class="keywordflow">return</font> (left == v.left &amp;&amp; top == v.top &amp;&amp; right == v.right &amp;&amp; bottom == v.bottom);
00628     }
00629     <font class="keywordtype">bool</font> operator!=(<font class="keyword">const</font> DRECT &amp;v)<font class="keyword"></font>
00630 <font class="keyword">    </font>{
00631         <font class="keywordflow">return</font> (left != v.left || top != v.top || right != v.right || bottom != v.bottom);
00632     }
00633 
00634     <font class="keywordtype">double</font>  left;
00635     <font class="keywordtype">double</font>  top;
00636     <font class="keywordtype">double</font>  right;
00637     <font class="keywordtype">double</font>  bottom;
00638 };
00639 
00640 <font class="keyword">class </font>FRECT
00641 {
00642 <font class="keyword">public</font>:
00643     <font class="keywordtype">void</font> SetRect(<font class="keywordtype">float</font> l, <font class="keywordtype">float</font> t, <font class="keywordtype">float</font> r, <font class="keywordtype">float</font> b)<font class="keyword"></font>
00644 <font class="keyword">    </font>{
00645         left = l; top = t; right = r; bottom = b;
00646     }
00647     <font class="comment">// retrieves the width</font>
00648     <font class="keywordtype">float</font> Width()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> right - left; }
00649     <font class="comment">// returns the height</font>
00650     <font class="keywordtype">float</font> Height()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> top - bottom; };
00651     <font class="keywordtype">bool</font> ContainsPoint(<font class="keywordtype">float</font> x, <font class="keywordtype">float</font> y)<font class="keyword"></font>
00652 <font class="keyword">    </font>{
00653         <font class="keywordflow">return</font> (x &gt; left &amp;&amp; x &lt; right &amp;&amp; y &gt; bottom &amp;&amp; y &lt; top);
00654     }
00655 
00656     <font class="keywordtype">float</font>   left;
00657     <font class="keywordtype">float</font>   top;
00658     <font class="keywordtype">float</font>   right;
00659     <font class="keywordtype">float</font>   bottom;
00660 };
00661 
00663 <font class="comment">// Matrix classes</font>
00664 
00665 <font class="keyword">class </font>DMatrix3;
00666 <font class="keyword">class </font>DMatrix4;
00667 
00668 <font class="keyword">class </font>DMatrix3
00669 {
00670 <font class="keyword">public</font>:
00671     <font class="keywordtype">void</font>  Set(<font class="keywordtype">int</font> i1, <font class="keywordtype">int</font> i2, <font class="keywordtype">double</font> v)<font class="keyword"> </font>{ data[i1][i2] = v; }
00672     <font class="keywordtype">double</font> Get(<font class="keywordtype">int</font> i1, <font class="keywordtype">int</font> i2)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> data[i1][i2]; }
00673 
00674     <font class="keywordtype">void</font> Transform(<font class="keyword">const</font> DPoint3 &amp;src, DPoint3 &amp;dst) <font class="keyword">const</font>;
00675     <font class="keywordtype">void</font> SetByMatrix4(<font class="keyword">const</font> DMatrix4 &amp;m);
00676 
00677 <font class="keyword">protected</font>:
00678     <font class="keywordtype">double</font> data[3][3];
00679 };
00680 <font class="keyword">class </font>DMatrix4
00681 {
00682 <font class="keyword">public</font>:
00683     <font class="keywordtype">void</font>  Set(<font class="keywordtype">int</font> i1, <font class="keywordtype">int</font> i2, <font class="keywordtype">double</font> v)<font class="keyword"> </font>{ data[i1][i2] = v; }
00684     <font class="keywordtype">double</font> Get(<font class="keywordtype">int</font> i1, <font class="keywordtype">int</font> i2)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> data[i1][i2]; }
00685 
00686     <font class="keywordtype">void</font> Identity();
00687     <font class="keywordtype">void</font> AxisAngle(<font class="keyword">const</font> DPoint3 &amp;vec, <font class="keywordtype">double</font> theta);
00688     <font class="keywordtype">void</font> Invert(<font class="keyword">const</font> DMatrix4 &amp;src);
00689 
00690 <font class="keyword">protected</font>:
00691     <font class="keywordtype">double</font> data[4][4];
00692 };
00693 
00695 
00696 <font class="keyword">class </font>FMatrix3
00697 {
00698 <font class="keyword">public</font>:
00699     <font class="keywordtype">void</font>  Set(<font class="keywordtype">int</font> i1, <font class="keywordtype">int</font> i2, <font class="keywordtype">float</font> v)<font class="keyword"> </font>{ data[i1][i2] = v; }
00700     <font class="keywordtype">float</font> Get(<font class="keywordtype">int</font> i1, <font class="keywordtype">int</font> i2)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> data[i1][i2]; }
00701 
00702     <font class="keywordtype">void</font> Transform(<font class="keyword">const</font> FPoint3 &amp;src, FPoint3 &amp;dst) <font class="keyword">const</font>;
00703     <font class="keywordtype">void</font> SetByMatrix4(<font class="keyword">const</font> <font class="keyword">class</font> FMatrix4 &amp;m);
00704 
00705 <font class="keyword">protected</font>:
00706     <font class="keywordtype">float</font> data[3][3];
00707 };
00708 
00709 <font class="keyword">class </font>FMatrix4
00710 {
00711 <font class="keyword">public</font>:
00712     <font class="keywordtype">void</font>  Set(<font class="keywordtype">int</font> i1, <font class="keywordtype">int</font> i2, <font class="keywordtype">float</font> v)<font class="keyword"> </font>{ data[i1][i2] = v; }
00713     <font class="keywordtype">float</font> Get(<font class="keywordtype">int</font> i1, <font class="keywordtype">int</font> i2)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> data[i1][i2]; }
00714 
00715     <font class="comment">// set/modify</font>
00716     <font class="keywordtype">void</font> Identity();
00717     <font class="keywordtype">bool</font> IsIdentity() <font class="keyword">const</font>;
00718     <font class="keywordtype">void</font> AxisAngle(<font class="keyword">const</font> FPoint3 &amp;vec, <font class="keywordtype">double</font> theta);
00719     <font class="keywordtype">void</font> Translate(<font class="keyword">const</font> FPoint3 &amp;vec);
00720     <font class="keywordtype">void</font> Invert(<font class="keyword">const</font> FMatrix4 &amp;src);
00721     FPoint3 GetTrans() <font class="keyword">const</font>;
00722     <font class="keywordtype">void</font> SetTrans(FPoint3 pos);
00723 
00724     <font class="comment">// apply to vectors</font>
00725     <font class="keywordtype">void</font> Transform(<font class="keyword">const</font> FPoint3 &amp;src, FPoint3 &amp;dst) <font class="keyword">const</font>;
00726     <font class="keywordtype">void</font> TransformVector(<font class="keyword">const</font> FPoint3 &amp;tmp, FPoint3 &amp;dst) <font class="keyword">const</font>;
00727 
00728 <font class="keyword">protected</font>:
00729     <font class="keywordtype">float</font> data[4][4];
00730 };
00731 
00733 <font class="comment">//</font>
00734 <font class="comment">// rgb class for handling color operations</font>
00735 <font class="comment">//</font>
00736 <font class="comment">// this one handles colors with integer components (0-255)</font>
00737 <font class="comment">//</font>
00738 <font class="keyword">class </font>RGBi
00739 {
00740 <font class="keyword">public</font>:
00741     RGBi()<font class="keyword"> </font>{}
00742     RGBi(<font class="keywordtype">short</font> _r, <font class="keywordtype">short</font> _g, <font class="keywordtype">short</font> _b)<font class="keyword"> </font>{ r = _r; g = _g; b = _b; }
00743     RGBi(<font class="keyword">const</font> <font class="keyword">class</font> RGBf &amp;v)<font class="keyword"> </font>{ *<font class="keyword">this</font> = v; }
00744 
00745     <font class="keywordtype">void</font> Set(<font class="keywordtype">short</font> _r, <font class="keywordtype">short</font> _g, <font class="keywordtype">short</font> _b)<font class="keyword"> </font>{ r = _r; g = _g; b = _b; }
00746     RGBi operator +(<font class="keyword">const</font> RGBi &amp;v)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> RGBi(r+v.r, g+v.g, b+v.b); }
00747     RGBi operator -(<font class="keyword">const</font> RGBi &amp;v)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> RGBi(r-v.r, g-v.g, b-v.b); }
00748     RGBi operator *(<font class="keywordtype">float</font> s)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> RGBi((<font class="keywordtype">short</font>)(r*s), (<font class="keywordtype">short</font>)(g*s), (<font class="keywordtype">short</font>)(b*s)); }
00749     RGBi operator /(<font class="keywordtype">float</font> s)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> RGBi((<font class="keywordtype">short</font>)(r/s), (<font class="keywordtype">short</font>)(g/s), (<font class="keywordtype">short</font>)(b/s)); }
00750     <font class="keywordtype">void</font> operator *=(<font class="keywordtype">float</font> s)<font class="keyword"> </font>{ r=(<font class="keywordtype">short</font>)(r*s); g=(<font class="keywordtype">short</font>)(g*s); b=(<font class="keywordtype">short</font>)(b*s); }
00751 
00752     <font class="comment">// assignment</font>
00753     RGBi &amp;operator=(<font class="keyword">const</font> RGBi &amp;v)<font class="keyword"> </font>{ r = v.r; g = v.g; b = v.b; <font class="keywordflow">return</font> *<font class="keyword">this</font>; }
00754     RGBi &amp;operator=(<font class="keyword">const</font> <font class="keyword">class</font> RGBf &amp;v);
00755 
00756     <font class="keywordtype">bool</font> operator==(<font class="keyword">const</font> RGBi &amp;v)<font class="keyword"> </font>{ <font class="keywordflow">return</font> (r == v.r &amp;&amp; g == v.g &amp;&amp; b == v.b); }
00757     <font class="keywordtype">bool</font> operator!=(<font class="keyword">const</font> RGBi &amp;v)<font class="keyword"> </font>{ <font class="keywordflow">return</font> (r != v.r || g != v.g || b != v.b); }
00758 
00759     <font class="keywordtype">short</font> r, g, b;
00760 };
00761 
00762 <font class="comment">//</font>
00763 <font class="comment">// this one handles colors with float components (0-1)</font>
00764 <font class="comment">//</font>
00765 <font class="keyword">class </font>RGBf
00766 {
00767 <font class="keyword">public</font>:
00768     RGBf()<font class="keyword"> </font>{}
00769     RGBf(<font class="keywordtype">float</font> _r, <font class="keywordtype">float</font> _g, <font class="keywordtype">float</font> _b)<font class="keyword"> </font>{ r = _r; g = _g; b = _b; }
00770     RGBf(<font class="keyword">const</font> <font class="keyword">class</font> RGBi &amp;v)<font class="keyword"> </font>{ *<font class="keyword">this</font> = v; }
00771 
00772     <font class="keywordtype">void</font> Set(<font class="keywordtype">float</font> _r, <font class="keywordtype">float</font> _g, <font class="keywordtype">float</font> _b)<font class="keyword"> </font>{ r = _r; g = _g; b = _b; }
00773     RGBf operator +(<font class="keyword">const</font> RGBf &amp;v)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> RGBf(r+v.r, g+v.g, b+v.b); }
00774     RGBf operator -(<font class="keyword">const</font> RGBf &amp;v)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> RGBf(r-v.r, g-v.g, b-v.b); }
00775     RGBf operator *(<font class="keywordtype">float</font> s)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> RGBf(r*s, g*s, b*s); }
00776     RGBf operator /(<font class="keywordtype">float</font> s)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> RGBf(r/s, g/s, b/s); }
00777     <font class="keywordtype">void</font> operator *=(<font class="keywordtype">float</font> s)<font class="keyword"> </font>{ r*=s; g*=s; b*=s; }
00778 
00779     <font class="comment">// assignment</font>
00780     RGBf &amp;operator=(<font class="keyword">const</font> RGBf &amp;v)<font class="keyword"> </font>{ r = v.r; g = v.g; b = v.b; <font class="keywordflow">return</font> *<font class="keyword">this</font>; }
00781     RGBf &amp;operator=(<font class="keyword">const</font> <font class="keyword">class</font> RGBi &amp;v);
00782     RGBf &amp;operator=(<font class="keyword">const</font> <font class="keyword">class</font> RGBAf &amp;v);
00783 
00784     <font class="keywordtype">bool</font> operator==(<font class="keyword">const</font> RGBf &amp;v2)<font class="keyword"></font>
00785 <font class="keyword">    </font>{ <font class="keywordflow">return</font> (r == v2.r &amp;&amp; g == v2.g &amp;&amp; b == v2.b); }
00786     <font class="keywordtype">bool</font> operator!=(<font class="keyword">const</font> RGBf &amp;v2)<font class="keyword"></font>
00787 <font class="keyword">    </font>{ <font class="keywordflow">return</font> (r != v2.r || g != v2.g || b != v2.b); }
00788 
00789     <font class="keywordtype">float</font> r, g, b;
00790 };
00791 
00792 <font class="keyword">inline</font> RGBi &amp;RGBi::operator=(<font class="keyword">const</font> <font class="keyword">class</font> RGBf &amp;v)<font class="keyword"></font>
00793 <font class="keyword"></font>{
00794     r = (<font class="keywordtype">int</font>) (v.r * 255.999f);
00795     g = (<font class="keywordtype">int</font>) (v.g * 255.999f);
00796     b = (<font class="keywordtype">int</font>) (v.b * 255.999f);
00797     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00798 }
00799 
00800 <font class="keyword">inline</font> RGBf &amp;RGBf::operator=(<font class="keyword">const</font> <font class="keyword">class</font> RGBi &amp;v)<font class="keyword"></font>
00801 <font class="keyword"></font>{
00802     r = v.r / 255.0f;
00803     g = v.g / 255.0f;
00804     b = v.b / 255.0f;
00805     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00806 }
00807 
00809 <font class="comment">// And one with alpha value support</font>
00810 
00811 <font class="keyword">class </font>RGBAf
00812 {
00813 <font class="keyword">public</font>:
00814     RGBAf()<font class="keyword"> </font>{}
00815     RGBAf(<font class="keywordtype">float</font> _r, <font class="keywordtype">float</font> _g, <font class="keywordtype">float</font> _b)<font class="keyword"> </font>{ r = _r; g = _g; b = _b; a = 1.0f; }
00816     RGBAf(<font class="keywordtype">float</font> _r, <font class="keywordtype">float</font> _g, <font class="keywordtype">float</font> _b, <font class="keywordtype">float</font> _a)<font class="keyword"> </font>{ r = _r; g = _g; b = _b; a = _a; }
00817     RGBAf(<font class="keyword">const</font> <font class="keyword">class</font> RGBf &amp;v)<font class="keyword"> </font>{ *<font class="keyword">this</font> = v; }
00818 
00819     <font class="keywordtype">void</font> Set(<font class="keywordtype">float</font> _r, <font class="keywordtype">float</font> _g, <font class="keywordtype">float</font> _b)<font class="keyword"> </font>{ r = _r; g = _g; b = _b; }
00820     RGBAf operator +(<font class="keyword">const</font> RGBAf &amp;v)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> RGBAf(r+v.r, g+v.g, b+v.b, a+v.a); }
00821     RGBAf operator -(<font class="keyword">const</font> RGBAf &amp;v)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> RGBAf(r-v.r, g-v.g, b-v.b, a+v.a); }
00822     RGBAf operator *(<font class="keywordtype">float</font> s)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> RGBAf(r*s, g*s, b*s); }
00823     RGBAf operator /(<font class="keywordtype">float</font> s)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> RGBAf(r/s, g/s, b/s); }
00824     <font class="keywordtype">void</font> operator *=(<font class="keywordtype">float</font> s)<font class="keyword"> </font>{ r*=s; g*=s; b*=s; }
00825 
00826     <font class="comment">// assignment</font>
00827     RGBAf &amp;operator=(<font class="keyword">const</font> RGBf &amp;v)<font class="keyword"> </font>{ r = v.r; g = v.g; b = v.b; a = 1.0f; <font class="keywordflow">return</font> *<font class="keyword">this</font>; }
00828 
00829     <font class="keywordtype">float</font> r, g, b, a;
00830 };
00831 
00832 <font class="keyword">inline</font> RGBf &amp;RGBf::operator=(<font class="keyword">const</font> <font class="keyword">class</font> RGBAf &amp;v)<font class="keyword"></font>
00833 <font class="keyword"></font>{
00834     r = v.r;
00835     g = v.g;
00836     b = v.b;
00837     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00838 }
00839 
00840 
00841 <font class="comment">//</font>
00842 <font class="comment">// handy helper functions</font>
00843 <font class="comment">//</font>
00844 <font class="keywordtype">float</font> random_offset(<font class="keywordtype">float</font> x);
00845 <font class="keywordtype">float</font> random(<font class="keywordtype">float</font> x);
00846 <font class="keywordtype">bool</font> CrossingsTest(DPoint2 *pgon, <font class="keywordtype">int</font> numverts, <font class="keyword">const</font> DPoint2 &amp;point);
00847 
00848 <font class="preprocessor">#endif</font>
</font></pre></div><hr><address><small>Generated at Sun Oct 7 23:42:35 2001 for vtdata library by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.9.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
