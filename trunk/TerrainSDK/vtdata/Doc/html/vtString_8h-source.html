<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>vtString.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.9.1 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>vtString.h</h1><div class="fragment"><pre>00001 <font class="comment">//</font>
00002 <font class="comment">// vtString.h</font>
00003 <font class="comment">//</font>
00004 <font class="comment">// Copyright (c) 2001 Virtual Terrain Project</font>
00005 <font class="comment">// Free for all uses, see license.txt for details.</font>
00006 <font class="comment">//</font>
00007 
00008 <font class="preprocessor">#ifndef VTSTRINGH</font>
00009 <font class="preprocessor"></font><font class="preprocessor">#define VTSTRINGH</font>
00010 <font class="preprocessor"></font>
00011 <font class="preprocessor">#include &lt;string.h&gt;</font>
00012 <font class="preprocessor">#include &lt;stdarg.h&gt;</font>
00013 
00014 <font class="preprocessor">#ifdef WIN32</font>
00015 <font class="preprocessor"></font><font class="preprocessor">#  define WIN_UNIX_STDCALL __stdcall</font>
00016 <font class="preprocessor"></font><font class="preprocessor">#  define WIN_UNIX_CDECL __cdecl</font>
00017 <font class="preprocessor"></font><font class="preprocessor">#else</font>
00018 <font class="preprocessor"></font>   <font class="comment">/*  UNIX doesn't have competing calling conventions to deal with  */</font>
00019 <font class="preprocessor">#  define WIN_UNIX_STDCALL</font>
00020 <font class="preprocessor"></font><font class="preprocessor">#  define WIN_UNIX_CDECL</font>
00021 <font class="preprocessor"></font><font class="preprocessor">#endif</font>
00022 <font class="preprocessor"></font>
00023 <font class="comment">// pointer to const char</font>
00024 <font class="keyword">typedef</font> <font class="keywordtype">char</font> *pchar;
00025 <font class="keyword">typedef</font> <font class="keyword">const</font> <font class="keywordtype">char</font> *pcchar;
00026 <font class="keyword">typedef</font> <font class="keyword">const</font> <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> *pcuchar;
00027 
00028 <font class="keyword">struct </font>vtStringData
00029 {
00030     <font class="keywordtype">long</font> nRefs;             <font class="comment">// reference count</font>
00031     <font class="keywordtype">int</font> nDataLength;        <font class="comment">// length of data (including terminator)</font>
00032     <font class="keywordtype">int</font> nAllocLength;       <font class="comment">// length of allocation</font>
00033     <font class="comment">// char data[nAllocLength]</font>
00034 
00035     <font class="keywordtype">char</font>* data()           <font class="comment">// char* to managed data</font>
00036         { <font class="keywordflow">return</font> (<font class="keywordtype">char</font>*)(<font class="keyword">this</font>+1); }
00037 };
00038 
<a name="l00043"></a><a class="code" href="classvtString.html">00043</a> <font class="keyword">class </font><a class="code" href="classvtString.html">vtString</a>
00044 {
00045 <font class="keyword">public</font>:
00046 <font class="comment">// Constructors</font>
00047 
00048     <font class="comment">// constructs empty vtString</font>
00049     vtString();
00050     <font class="comment">// copy constructor</font>
00051     vtString(<font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; stringSrc);
00052     <font class="comment">// from a single character</font>
00053     vtString(<font class="keywordtype">char</font> ch, <font class="keywordtype">int</font> nRepeat = 1);
00054     <font class="comment">// from an ANSI string (converts to char)</font>
00055     vtString(pcchar lpsz);
00056     <font class="comment">// subset of characters from an ANSI string (converts to char)</font>
00057     vtString(pcchar lpch, <font class="keywordtype">int</font> nLength);
00058     <font class="comment">// from unsigned characters</font>
00059     vtString(<font class="keyword">const</font> <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font>* psz);
00060     <font class="comment">// for constructing from user-allocated memory</font>
00061     <font class="keywordtype">void</font>* operator new(size_t size, <font class="keywordtype">void</font>* p)<font class="keyword">    </font>{ <font class="keywordflow">return</font> p; }
00062 
00063 <font class="comment">// Attributes &amp; Operations</font>
00064 
00065     <font class="comment">// get data length</font>
00066     <font class="keywordtype">int</font> GetLength() <font class="keyword">const</font>;
00067     <font class="comment">// TRUE if zero length</font>
00068     <font class="keywordtype">bool</font> IsEmpty() <font class="keyword">const</font>;
00069     <font class="comment">// clear contents to empty</font>
00070     <font class="keywordtype">void</font> Empty();
00071 
00072     <font class="comment">// return single character at zero-based index</font>
00073     <font class="keywordtype">char</font> GetAt(<font class="keywordtype">int</font> nIndex) <font class="keyword">const</font>;
00074     <font class="comment">// return single character at zero-based index</font>
00075     <font class="keywordtype">char</font> operator[](<font class="keywordtype">int</font> nIndex) <font class="keyword">const</font>;
00076     <font class="comment">// set a single character at zero-based index</font>
00077     <font class="keywordtype">void</font> SetAt(<font class="keywordtype">int</font> nIndex, <font class="keywordtype">char</font> ch);
00078     <font class="comment">// return pointer to const string</font>
00079     operator pcchar() <font class="keyword">const</font>;
00080 
00081     <font class="comment">// overloaded assignment</font>
00082 
00083     <font class="comment">// ref-counted copy from another vtString</font>
00084     <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; operator=(<font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; stringSrc);
00085     <font class="comment">// set string content to single character</font>
00086     <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; operator=(<font class="keywordtype">char</font> ch);
00087     <font class="comment">// copy string content from ANSI string (converts to char)</font>
00088     <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; operator=(pcchar lpsz);
00089     <font class="comment">// copy string content from unsigned chars</font>
00090     <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; operator=(<font class="keyword">const</font> <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font>* psz);
00091 
00092     <font class="comment">// string concatenation</font>
00093 
00094     <font class="comment">// concatenate a ANSI string</font>
00095     <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; operator+=(pcchar lpsz);
00096     <font class="comment">// concatenate from another vtString</font>
00097     <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; operator+=(<font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; string);
00098     <font class="comment">// concatenate a single character</font>
00099     <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; operator+=(<font class="keywordtype">char</font> ch);
00100 
00101     <font class="keyword">friend</font> <a class="code" href="classvtString.html">vtString</a> WIN_UNIX_STDCALL operator+(<font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; string1, <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; string2);
00102     <font class="keyword">friend</font> <a class="code" href="classvtString.html">vtString</a> WIN_UNIX_STDCALL operator+(<font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; string, <font class="keywordtype">char</font> ch);
00103     <font class="keyword">friend</font> <a class="code" href="classvtString.html">vtString</a> WIN_UNIX_STDCALL operator+(<font class="keywordtype">char</font> ch, <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; string);
00104     <font class="keyword">friend</font> <a class="code" href="classvtString.html">vtString</a> WIN_UNIX_STDCALL operator+(<font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; string, pcchar lpsz);
00105     <font class="keyword">friend</font> <a class="code" href="classvtString.html">vtString</a> WIN_UNIX_STDCALL operator+(pcchar lpsz, <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; string);
00106 
00107     <font class="comment">// string comparison</font>
00108 
00109     <font class="comment">// straight character comparison</font>
00110     <font class="keywordtype">int</font> Compare(pcchar lpsz) <font class="keyword">const</font>;
00111     <font class="comment">// compare ignoring case</font>
00112     <font class="keywordtype">int</font> CompareNoCase(pcchar lpsz) <font class="keyword">const</font>;
00113     <font class="comment">// NLS aware comparison, case sensitive</font>
00114     <font class="keywordtype">int</font> Collate(pcchar lpsz) <font class="keyword">const</font>;
00115     <font class="comment">// NLS aware comparison, case insensitive</font>
00116     <font class="keywordtype">int</font> CollateNoCase(pcchar lpsz) <font class="keyword">const</font>;
00117 
00118     <font class="comment">// simple sub-string extraction</font>
00119 
00120     <font class="comment">// return nCount characters starting at zero-based nFirst</font>
00121     <a class="code" href="classvtString.html">vtString</a> Mid(<font class="keywordtype">int</font> nFirst, <font class="keywordtype">int</font> nCount) <font class="keyword">const</font>;
00122     <font class="comment">// return all characters starting at zero-based nFirst</font>
00123     <a class="code" href="classvtString.html">vtString</a> Mid(<font class="keywordtype">int</font> nFirst) <font class="keyword">const</font>;
00124     <font class="comment">// return first nCount characters in string</font>
00125     <a class="code" href="classvtString.html">vtString</a> Left(<font class="keywordtype">int</font> nCount) <font class="keyword">const</font>;
00126     <font class="comment">// return nCount characters from end of string</font>
00127     <a class="code" href="classvtString.html">vtString</a> Right(<font class="keywordtype">int</font> nCount) <font class="keyword">const</font>;
00128 
00129     <font class="comment">//  characters from beginning that are also in passed string</font>
00130     <a class="code" href="classvtString.html">vtString</a> SpanIncluding(pcchar lpszCharSet) <font class="keyword">const</font>;
00131     <font class="comment">// characters from beginning that are not also in passed string</font>
00132     <a class="code" href="classvtString.html">vtString</a> SpanExcluding(pcchar lpszCharSet) <font class="keyword">const</font>;
00133 
00134     <font class="comment">// upper/lower/reverse conversion</font>
00135 
00136     <font class="comment">// NLS aware conversion to uppercase</font>
00137     <font class="keywordtype">void</font> MakeUpper();
00138     <font class="comment">// NLS aware conversion to lowercase</font>
00139     <font class="keywordtype">void</font> MakeLower();
00140     <font class="comment">// reverse string right-to-left</font>
00141     <font class="keywordtype">void</font> MakeReverse();
00142 
00143     <font class="comment">// trimming whitespace (either side)</font>
00144 
00145     <font class="comment">// remove whitespace starting from right edge</font>
00146     <font class="keywordtype">void</font> TrimRight();
00147     <font class="comment">// remove whitespace starting from left side</font>
00148     <font class="keywordtype">void</font> TrimLeft();
00149 
00150     <font class="comment">// trimming anything (either side)</font>
00151 
00152     <font class="comment">// remove continuous occurrences of chTarget starting from right</font>
00153     <font class="keywordtype">void</font> TrimRight(<font class="keywordtype">char</font> chTarget);
00154     <font class="comment">// remove continuous occcurrences of characters in passed string,</font>
00155     <font class="comment">// starting from right</font>
00156     <font class="keywordtype">void</font> TrimRight(pcchar lpszTargets);
00157     <font class="comment">// remove continuous occurrences of chTarget starting from left</font>
00158     <font class="keywordtype">void</font> TrimLeft(<font class="keywordtype">char</font> chTarget);
00159     <font class="comment">// remove continuous occcurrences of characters in</font>
00160     <font class="comment">// passed string, starting from left</font>
00161     <font class="keywordtype">void</font> TrimLeft(pcchar lpszTargets);
00162 
00163     <font class="comment">// advanced manipulation</font>
00164 
00165     <font class="comment">// replace occurrences of chOld with chNew</font>
00166     <font class="keywordtype">int</font> Replace(<font class="keywordtype">char</font> chOld, <font class="keywordtype">char</font> chNew);
00167     <font class="comment">// replace occurrences of substring lpszOld with lpszNew;</font>
00168     <font class="comment">// empty lpszNew removes instances of lpszOld</font>
00169     <font class="keywordtype">int</font> Replace(pcchar lpszOld, pcchar lpszNew);
00170     <font class="comment">// remove occurrences of chRemove</font>
00171     <font class="keywordtype">int</font> Remove(<font class="keywordtype">char</font> chRemove);
00172     <font class="comment">// insert character at zero-based index; concatenates</font>
00173     <font class="comment">// if index is past end of string</font>
00174     <font class="keywordtype">int</font> Insert(<font class="keywordtype">int</font> nIndex, <font class="keywordtype">char</font> ch);
00175     <font class="comment">// insert substring at zero-based index; concatenates</font>
00176     <font class="comment">// if index is past end of string</font>
00177     <font class="keywordtype">int</font> Insert(<font class="keywordtype">int</font> nIndex, pcchar pstr);
00178     <font class="comment">// delete nCount characters starting at zero-based index</font>
00179     <font class="keywordtype">int</font> Delete(<font class="keywordtype">int</font> nIndex, <font class="keywordtype">int</font> nCount = 1);
00180 
00181     <font class="comment">// searching</font>
00182 
00183     <font class="comment">// find character starting at left, -1 if not found</font>
00184     <font class="keywordtype">int</font> Find(<font class="keywordtype">char</font> ch) <font class="keyword">const</font>;
00185     <font class="comment">// find character starting at right</font>
00186     <font class="keywordtype">int</font> ReverseFind(<font class="keywordtype">char</font> ch) <font class="keyword">const</font>;
00187     <font class="comment">// find character starting at zero-based index and going right</font>
00188     <font class="keywordtype">int</font> Find(<font class="keywordtype">char</font> ch, <font class="keywordtype">int</font> nStart) <font class="keyword">const</font>;
00189     <font class="comment">// find first instance of any character in passed string</font>
00190     <font class="keywordtype">int</font> FindOneOf(pcchar lpszCharSet) <font class="keyword">const</font>;
00191     <font class="comment">// find first instance of substring</font>
00192     <font class="keywordtype">int</font> Find(pcchar szSub) <font class="keyword">const</font>;
00193     <font class="comment">// find first instance of substring starting at zero-based index</font>
00194     <font class="keywordtype">int</font> Find(pcchar szSub, <font class="keywordtype">int</font> nStart) <font class="keyword">const</font>;
00195 
00196     <font class="comment">// simple formatting</font>
00197     <font class="comment">// printf-like formatting using passed string</font>
00198     <font class="keywordtype">void</font> WIN_UNIX_CDECL Format(pcchar lpszFormat, ...);
00199     <font class="comment">// printf-like formatting using variable arguments parameter</font>
00200     <font class="keywordtype">void</font> FormatV(pcchar lpszFormat, va_list argList);
00201 
00202     <font class="comment">// formatting for localization (uses FormatMessage API)</font>
00203     <font class="comment">// format using FormatMessage API on passed string</font>
00204     <font class="keywordtype">void</font> WIN_UNIX_CDECL FormatMessage(pcchar lpszFormat, ...);
00205 
00206     <font class="comment">// Access to string implementation buffer as "C" character array</font>
00207     <font class="comment">// get pointer to modifiable buffer at least as long as nMinBufLength</font>
00208     pchar GetBuffer(<font class="keywordtype">int</font> nMinBufLength);
00209     <font class="comment">// release buffer, setting length to nNewLength (or to first nul if -1)</font>
00210     <font class="keywordtype">void</font> ReleaseBuffer(<font class="keywordtype">int</font> nNewLength = -1);
00211     <font class="comment">// get pointer to modifiable buffer exactly as long as nNewLength</font>
00212     pchar GetBufferSetLength(<font class="keywordtype">int</font> nNewLength);
00213     <font class="comment">// release memory allocated to but unused by string</font>
00214     <font class="keywordtype">void</font> FreeExtra();
00215 
00216     <font class="comment">// Use LockBuffer/UnlockBuffer to turn refcounting off</font>
00217 
00218     <font class="comment">// turn refcounting back on</font>
00219     pchar LockBuffer();
00220     <font class="comment">// turn refcounting off</font>
00221     <font class="keywordtype">void</font> UnlockBuffer();
00222 
00223 <font class="comment">// Implementation</font>
00224 <font class="keyword">public</font>:
00225     ~vtString();
00226     <font class="keywordtype">int</font> GetAllocLength() <font class="keyword">const</font>;
00227 
00228 <font class="keyword">protected</font>:
00229     pchar m_pchData;   <font class="comment">// pointer to ref counted string data</font>
00230 
00231     <font class="comment">// implementation helpers</font>
00232     vtStringData* GetData() <font class="keyword">const</font>;
00233     <font class="keywordtype">void</font> Init();
00234     <font class="keywordtype">void</font> AllocCopy(<a class="code" href="classvtString.html">vtString</a>&amp; dest, <font class="keywordtype">int</font> nCopyLen, <font class="keywordtype">int</font> nCopyIndex, <font class="keywordtype">int</font> nExtraLen) <font class="keyword">const</font>;
00235     <font class="keywordtype">void</font> AllocBuffer(<font class="keywordtype">int</font> nLen);
00236     <font class="keywordtype">void</font> AssignCopy(<font class="keywordtype">int</font> nSrcLen, pcchar szSrcData);
00237     <font class="keywordtype">void</font> ConcatCopy(<font class="keywordtype">int</font> nSrc1Len, pcchar szSrc1Data, <font class="keywordtype">int</font> nSrc2Len, pcchar szSrc2Data);
00238     <font class="keywordtype">void</font> ConcatInPlace(<font class="keywordtype">int</font> nSrcLen, pcchar szSrcData);
00239     <font class="keywordtype">void</font> CopyBeforeWrite();
00240     <font class="keywordtype">void</font> AllocBeforeWrite(<font class="keywordtype">int</font> nLen);
00241     <font class="keywordtype">void</font> Release();
00242     <font class="keyword">static</font> <font class="keywordtype">void</font> WIN_UNIX_STDCALL Release(vtStringData* pData);
00243     <font class="keyword">static</font> <font class="keywordtype">int</font> WIN_UNIX_STDCALL SafeStrlen(pcchar lpsz);
00244     <font class="keyword">static</font> <font class="keywordtype">void</font> FreeData(vtStringData* pData);
00245     };
00246 
00247 <font class="comment">// Compare helpers</font>
00248 <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator==(<font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s1, <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s2);
00249 <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator==(<font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s1, pcchar s2);
00250 <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator==(pcchar s1, <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s2);
00251 <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator!=(<font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s1, <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s2);
00252 <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator!=(<font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s1, pcchar s2);
00253 <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator!=(pcchar s1, <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s2);
00254 <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator&lt;(<font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s1, <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s2);
00255 <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator&lt;(<font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s1, pcchar s2);
00256 <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator&lt;(pcchar s1, <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s2);
00257 <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator&gt;(<font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s1, <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s2);
00258 <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator&gt;(<font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s1, pcchar s2);
00259 <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator&gt;(pcchar s1, <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s2);
00260 <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator&lt;=(<font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s1, <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s2);
00261 <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator&lt;=(<font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s1, pcchar s2);
00262 <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator&lt;=(pcchar s1, <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s2);
00263 <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator&gt;=(<font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s1, <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s2);
00264 <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator&gt;=(<font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s1, pcchar s2);
00265 <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator&gt;=(pcchar s1, <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s2);
00266 
00267 <font class="comment">// conversion helpers</font>
00268 <font class="keywordtype">int</font> WIN_UNIX_CDECL _wcstombsz(<font class="keywordtype">char</font>* mbstr, <font class="keyword">const</font> <font class="keywordtype">wchar_t</font>* wcstr, size_t count);
00269 <font class="keywordtype">int</font> WIN_UNIX_CDECL _mbstowcsz(<font class="keywordtype">wchar_t</font>* wcstr, <font class="keyword">const</font> <font class="keywordtype">char</font>* mbstr, size_t count);
00270 
00271 <font class="comment">// Globals</font>
00272 <font class="keyword">extern</font> <font class="keywordtype">char</font> vtChNil;
00273 <font class="keyword">extern</font> pcchar _vtPchNil;
00274 <font class="preprocessor">#define vtEmptyString ((vtString&amp;)*(vtString*)&amp;_vtPchNil)</font>
00275 <font class="preprocessor"></font>
00276 <font class="comment">//</font>
00277 <font class="comment">// vtString inlines</font>
00278 <font class="comment">//</font>
00279 <font class="keyword">inline</font> vtStringData* vtString::GetData()<font class="keyword"> const</font>
00280 <font class="keyword">    </font>{ <font class="keywordflow">return</font> ((vtStringData*)m_pchData)-1; }
00281 <font class="keyword">inline</font> <font class="keywordtype">void</font> vtString::Init()<font class="keyword"></font>
00282 <font class="keyword">    </font>{ m_pchData = vtEmptyString.m_pchData; }
00283 <font class="keyword">inline</font> vtString::vtString()<font class="keyword"></font>
00284 <font class="keyword">    </font>{ m_pchData = vtEmptyString.m_pchData; }
00285 <font class="keyword">inline</font> vtString::vtString(<font class="keyword">const</font> <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font>* lpsz)<font class="keyword"></font>
00286 <font class="keyword">    </font>{ Init(); *<font class="keyword">this</font> = (pcchar)lpsz; }
00287 <font class="keyword">inline</font> <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; vtString::operator=(<font class="keyword">const</font> <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font>* lpsz)<font class="keyword"></font>
00288 <font class="keyword">    </font>{ *<font class="keyword">this</font> = (pcchar)lpsz; <font class="keywordflow">return</font> *<font class="keyword">this</font>; }
00289 <font class="keyword">inline</font> <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; vtString::operator+=(<font class="keywordtype">char</font> ch)<font class="keyword"></font>
00290 <font class="keyword">    </font>{ *<font class="keyword">this</font> += (<font class="keywordtype">char</font>)ch; <font class="keywordflow">return</font> *<font class="keyword">this</font>; }
00291 <font class="keyword">inline</font> <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; vtString::operator=(<font class="keywordtype">char</font> ch)<font class="keyword"></font>
00292 <font class="keyword">    </font>{ *<font class="keyword">this</font> = (<font class="keywordtype">char</font>)ch; <font class="keywordflow">return</font> *<font class="keyword">this</font>; }
00293 
00294 <font class="keyword">inline</font> <font class="keywordtype">int</font> vtString::GetLength()<font class="keyword"> const</font>
00295 <font class="keyword">    </font>{ <font class="keywordflow">return</font> GetData()-&gt;nDataLength; }
00296 <font class="keyword">inline</font> <font class="keywordtype">int</font> vtString::GetAllocLength()<font class="keyword"> const</font>
00297 <font class="keyword">    </font>{ <font class="keywordflow">return</font> GetData()-&gt;nAllocLength; }
00298 <font class="keyword">inline</font> <font class="keywordtype">bool</font> vtString::IsEmpty()<font class="keyword"> const</font>
00299 <font class="keyword">    </font>{ <font class="keywordflow">return</font> GetData()-&gt;nDataLength == 0; }
00300 <font class="keyword">inline</font> vtString::operator pcchar()<font class="keyword"> const</font>
00301 <font class="keyword">    </font>{ <font class="keywordflow">return</font> m_pchData; }
00302 <font class="keyword">inline</font> <font class="keywordtype">int</font> WIN_UNIX_STDCALL vtString::SafeStrlen(pcchar lpsz)<font class="keyword"></font>
00303 <font class="keyword">    </font>{ <font class="keywordflow">return</font> (lpsz == NULL) ? 0 : strlen(lpsz); }
00304 
00305 <font class="comment">// vtString support (windows specific)</font>
00306 <font class="keyword">inline</font> <font class="keywordtype">int</font> vtString::Compare(pcchar lpsz)<font class="keyword"> const</font>
00307 <font class="keyword">    </font>{ <font class="keywordflow">return</font> strcmp(m_pchData, lpsz); }    <font class="comment">// MBCS/Unicode aware</font>
00308 
00309 
00310 <font class="keyword">inline</font> <font class="keywordtype">char</font> vtString::GetAt(<font class="keywordtype">int</font> nIndex)<font class="keyword"> const</font>
00311 <font class="keyword"></font>{
00312     <font class="keywordflow">return</font> m_pchData[nIndex];
00313 }
00314 <font class="keyword">inline</font> <font class="keywordtype">char</font> vtString::operator[](<font class="keywordtype">int</font> nIndex)<font class="keyword"> const</font>
00315 <font class="keyword"></font>{
00316     <font class="comment">// same as GetAt</font>
00317     <font class="keywordflow">return</font> m_pchData[nIndex];
00318 }
00319 <font class="keyword">inline</font> <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator==(<font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s1, <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s2)<font class="keyword"></font>
00320 <font class="keyword">    </font>{ <font class="keywordflow">return</font> s1.Compare(s2) == 0; }
00321 <font class="keyword">inline</font> <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator==(<font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s1, pcchar s2)<font class="keyword"></font>
00322 <font class="keyword">    </font>{ <font class="keywordflow">return</font> s1.Compare(s2) == 0; }
00323 <font class="keyword">inline</font> <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator==(pcchar s1, <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s2)<font class="keyword"></font>
00324 <font class="keyword">    </font>{ <font class="keywordflow">return</font> s2.Compare(s1) == 0; }
00325 <font class="keyword">inline</font> <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator!=(<font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s1, <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s2)<font class="keyword"></font>
00326 <font class="keyword">    </font>{ <font class="keywordflow">return</font> s1.Compare(s2) != 0; }
00327 <font class="keyword">inline</font> <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator!=(<font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s1, pcchar s2)<font class="keyword"></font>
00328 <font class="keyword">    </font>{ <font class="keywordflow">return</font> s1.Compare(s2) != 0; }
00329 <font class="keyword">inline</font> <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator!=(pcchar s1, <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s2)<font class="keyword"></font>
00330 <font class="keyword">    </font>{ <font class="keywordflow">return</font> s2.Compare(s1) != 0; }
00331 <font class="keyword">inline</font> <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator&lt;(<font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s1, <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s2)<font class="keyword"></font>
00332 <font class="keyword">    </font>{ <font class="keywordflow">return</font> s1.Compare(s2) &lt; 0; }
00333 <font class="keyword">inline</font> <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator&lt;(<font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s1, pcchar s2)<font class="keyword"></font>
00334 <font class="keyword">    </font>{ <font class="keywordflow">return</font> s1.Compare(s2) &lt; 0; }
00335 <font class="keyword">inline</font> <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator&lt;(pcchar s1, <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s2)<font class="keyword"></font>
00336 <font class="keyword">    </font>{ <font class="keywordflow">return</font> s2.Compare(s1) &gt; 0; }
00337 <font class="keyword">inline</font> <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator&gt;(<font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s1, <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s2)<font class="keyword"></font>
00338 <font class="keyword">    </font>{ <font class="keywordflow">return</font> s1.Compare(s2) &gt; 0; }
00339 <font class="keyword">inline</font> <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator&gt;(<font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s1, pcchar s2)<font class="keyword"></font>
00340 <font class="keyword">    </font>{ <font class="keywordflow">return</font> s1.Compare(s2) &gt; 0; }
00341 <font class="keyword">inline</font> <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator&gt;(pcchar s1, <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s2)<font class="keyword"></font>
00342 <font class="keyword">    </font>{ <font class="keywordflow">return</font> s2.Compare(s1) &lt; 0; }
00343 <font class="keyword">inline</font> <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator&lt;=(<font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s1, <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s2)<font class="keyword"></font>
00344 <font class="keyword">    </font>{ <font class="keywordflow">return</font> s1.Compare(s2) &lt;= 0; }
00345 <font class="keyword">inline</font> <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator&lt;=(<font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s1, pcchar s2)<font class="keyword"></font>
00346 <font class="keyword">    </font>{ <font class="keywordflow">return</font> s1.Compare(s2) &lt;= 0; }
00347 <font class="keyword">inline</font> <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator&lt;=(pcchar s1, <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s2)<font class="keyword"></font>
00348 <font class="keyword">    </font>{ <font class="keywordflow">return</font> s2.Compare(s1) &gt;= 0; }
00349 <font class="keyword">inline</font> <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator&gt;=(<font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s1, <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s2)<font class="keyword"></font>
00350 <font class="keyword">    </font>{ <font class="keywordflow">return</font> s1.Compare(s2) &gt;= 0; }
00351 <font class="keyword">inline</font> <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator&gt;=(<font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s1, pcchar s2)<font class="keyword"></font>
00352 <font class="keyword">    </font>{ <font class="keywordflow">return</font> s1.Compare(s2) &gt;= 0; }
00353 <font class="keyword">inline</font> <font class="keywordtype">bool</font> WIN_UNIX_STDCALL operator&gt;=(pcchar s1, <font class="keyword">const</font> <a class="code" href="classvtString.html">vtString</a>&amp; s2)<font class="keyword"></font>
00354 <font class="keyword">    </font>{ <font class="keywordflow">return</font> s2.Compare(s1) &lt;= 0; }
00355 
00356 <font class="preprocessor">#endif</font>
00357 <font class="preprocessor"></font>
</pre></div><hr><address><small>Generated at Sun Oct 7 23:42:35 2001 for vtdata library by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.9.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
