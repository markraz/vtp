<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>LULC.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.9.1 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>LULC.h</h1><div class="fragment"><pre>00001 <font class="comment">//</font>
00002 <font class="comment">// Classes/structures to represent the data in a LULC file</font>
00003 <font class="comment">//</font>
00004 <font class="comment">// Copyright (c) 2001 Virtual Terrain Project</font>
00005 <font class="comment">// Free for all uses, see license.txt for details.</font>
00006 <font class="comment">//</font>
00007 
00008 <font class="preprocessor">#ifndef LULCH</font>
00009 <font class="preprocessor"></font><font class="preprocessor">#define LULCH</font>
00010 <font class="preprocessor"></font>
00011 <font class="preprocessor">#include &lt;stdio.h&gt;</font>
00012 <font class="preprocessor">#include "MathTypes.h"</font>
00013 
00014 <font class="preprocessor">#define LULC_ERR_FILE   1</font>
00015 <font class="preprocessor"></font><font class="preprocessor">#define LULC_ERR_READ   2</font>
00016 <font class="preprocessor"></font><font class="preprocessor">#define LULC_ERR_HEADER 3</font>
00017 <font class="preprocessor"></font>
00018 <font class="keyword">typedef</font> <font class="keyword">struct</font>
00019 {
00020     <font class="keywordtype">short</font> x;
00021     <font class="keywordtype">short</font> y;
00022 } Coord;
00023 
00024 <font class="keyword">typedef</font> <font class="keyword">struct</font>
00025 {
00026     <font class="keywordtype">short</font> first_coord;
00027     <font class="keywordtype">short</font> last_coord;
00028     <font class="keywordtype">short</font> PL;
00029     <font class="keywordtype">short</font> PR;
00030     <font class="keywordtype">int</font> PAL;
00031     <font class="keywordtype">int</font> PAR;
00032     <font class="keywordtype">int</font> Length;         <font class="comment">// in coordinate units</font>
00033     <font class="keywordtype">short</font> StartNode;
00034     <font class="keywordtype">short</font> FinishNode;
00035 } LULCArc;
00036 
00037 <font class="keyword">class </font>LULCPoly
00038 {
00039 <font class="keyword">public</font>:
00040     LULCPoly();
00041     ~LULCPoly();
00042 
00043     <font class="keywordtype">short</font> first_arc;
00044     <font class="keywordtype">short</font> last_arc;
00045     <font class="keywordtype">int</font> Attribute;
00046     <font class="keywordtype">int</font> PerimeterLength;
00047     <font class="keywordtype">short</font> NumIslands;
00048     <font class="keywordtype">short</font> SurroundingPoly;
00049 
00050     <font class="comment">// Vertices extracted by following and decoding the Arc data</font>
00051     <font class="keywordtype">int</font> m_iCoords;
00052     DPoint2 *m_p;   <font class="comment">// in lat-lon</font>
00053 
00054     <font class="comment">// store extents, in local coordinates, for speed in testing</font>
00055     <font class="keywordtype">double</font> xmin, zmin, xmax, zmax;
00056 };
00057 
00058 <font class="keyword">class </font>LULCSection
00059 {
00060 <font class="keyword">public</font>:
00061     ~LULCSection();
00062 
00063     <font class="keywordtype">int</font> m_iNumArcs;
00064     <font class="keywordtype">int</font> m_iNumCoords;
00065     <font class="keywordtype">int</font> m_iNumPolys;
00066     <font class="keywordtype">int</font> m_iLengthOfFAP;
00067     <font class="keywordtype">int</font> m_iNumNodes;
00068 
00069     LULCArc *m_pArc;
00070     Coord *m_pCoord;
00071     LULCPoly *m_pPoly;
00072     <font class="keywordtype">short</font> *m_pFAP;
00073 };
00074 
00075 <font class="keyword">class </font>vtLULCFile
00076 {
00077 <font class="keyword">public</font>:
00078     <font class="comment">// constructor - pass it the name of a LULC (GIRAS) file</font>
00079     vtLULCFile(<font class="keyword">const</font> <font class="keywordtype">char</font> *fname);
00080 
00081     <font class="comment">// destructor</font>
00082     ~vtLULCFile();
00083 
00084     <font class="comment">// attempt to determine the mapping from local to latlon</font>
00085     <font class="keywordtype">void</font> SetupMapping();
00086 
00087     <font class="comment">// read a section (there are usually 4 sections)</font>
00088     <font class="keywordtype">void</font> ReadSection(LULCSection *pSection, FILE *fp);
00089 
00090     <font class="comment">// read a single record from the file</font>
00091     <font class="keywordtype">int</font> GetRecord(FILE *fp, <font class="keywordtype">char</font> *buf);
00092 
00093     <font class="comment">// convert from local coordinates to latlon</font>
00094     <font class="keywordtype">void</font> LocalToLatlon(Coord &amp;local, DPoint2 &amp;latlon);
00095 
00096     <font class="comment">// processing LULC</font>
00097     <font class="keywordtype">void</font> ProcessLULCPolys();
00098     <font class="keywordtype">void</font> ProcessLULCPoly(LULCSection *pSection, LULCPoly *pPoly);
00099     <font class="keywordtype">int</font> FindAttribute(<font class="keywordtype">double</font> utm_x, <font class="keywordtype">double</font> utm_y);
00100 
00101     <font class="comment">// return error type if it didn't load successfully</font>
00102     <font class="keywordtype">int</font> m_iError;
00103     <font class="comment">// if an error occured, return it as an English message</font>
00104     <font class="keyword">const</font> <font class="keywordtype">char</font> *GetErrorMessage();
00105 
00106     <font class="comment">// extent of control points, in local coordinates</font>
00107     Coord m_cMin, m_cMax;
00108 
00109     <font class="comment">// local coordinates of control points</font>
00110     Coord m_cCorners[6];
00111 
00112     <font class="comment">// latitude and longitude of control points</font>
00113     DPoint2 m_Corners[6];
00114 
00115     <font class="comment">// access</font>
00116     <font class="keywordtype">int</font> NumSections()<font class="keyword"> </font>{ <font class="keywordflow">return</font> m_iNumSections; };
00117     LULCSection *GetSection(<font class="keywordtype">int</font> i)<font class="keyword"> </font>{ <font class="keywordflow">return</font> m_pSection+i; };
00118 
00119     <font class="comment">// used for making a list of these files</font>
00120     vtLULCFile *m_pNext;
00121 
00122 <font class="keyword">private</font>:
00123     <font class="keywordtype">int</font>     m_iNumSections;
00124     LULCSection *m_pSection;
00125     DMatrix3 m_transform;
00126 <font class="comment">//  DMatrix3 m_forwards;</font>
00127 };
00128 
00129 <font class="preprocessor">#endif // LULCH</font>
</font></pre></div><hr><address><small>Generated at Sun Oct 7 23:42:35 2001 for vtdata library by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.9.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
